(()=>{"use strict";var e={617:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.drawCircle=void 0;const n=o(923);t.drawCircle=async(e,t)=>{const o=parseInt(e[0],10),r=await n.mouse.getPosition(),s=r.x,i=r.y,a=await n.screen.height();if(s-2*o<0||i+o>a||i-o<0)console.log("Sorry, mouse shouldn't go out of the screen! Move your mouse in other position");else{await n.mouse.pressButton(n.Button.LEFT);for(let e=0;e<=360;e++){const t=Math.sin(2*Math.PI*e/360)*o+i,r=Math.cos(2*Math.PI*e/360)*o+(s-o);await n.mouse.move((0,n.straightTo)(new n.Point(r,t)))}await n.mouse.releaseButton(n.Button.LEFT),t.write(`draw_circle_${o}`),console.log(`Circle is drawn, radius ${o}px`)}}},980:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DrawRectangle=void 0;const n=o(923);t.DrawRectangle=async(e,t)=>{const o=parseInt(e[0],10),r=parseInt(e[1],10),s=await n.screen.width(),i=await n.screen.height(),a=await n.mouse.getPosition();a.x-40<0||a.x+o>s||a.y+r>i?console.log("Sorry, mouse shouldn't go out of the screen! Move your mouse in other position"):(await n.mouse.pressButton(n.Button.LEFT),await n.mouse.move((0,n.right)(o)),await n.mouse.releaseButton(n.Button.LEFT),await n.mouse.pressButton(n.Button.LEFT),await n.mouse.move((0,n.down)(r)),await n.mouse.releaseButton(n.Button.LEFT),await n.mouse.pressButton(n.Button.LEFT),await n.mouse.move((0,n.left)(o)),await n.mouse.releaseButton(n.Button.LEFT),await n.mouse.pressButton(n.Button.LEFT),await n.mouse.move((0,n.up)(r)),await n.mouse.releaseButton(n.Button.LEFT),t.write(`draw_rectangle_${o}_${r}`),console.log(`Rectangle is drawn, width ${o}px, height ${r}px`))}},190:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DrawSquare=void 0;const n=o(923);t.DrawSquare=async(e,t)=>{const o=parseInt(e[0],10),r=await n.screen.width(),s=await n.screen.height(),i=await n.mouse.getPosition();i.x-40<0||i.x+o>r||i.y+o>s?console.log("Sorry, mouse shouldn't go out of the screen! Move your mouse in other position"):(await n.mouse.pressButton(n.Button.LEFT),await n.mouse.move((0,n.right)(o)),await n.mouse.releaseButton(n.Button.LEFT),await n.mouse.pressButton(n.Button.LEFT),await n.mouse.move((0,n.down)(o)),await n.mouse.releaseButton(n.Button.LEFT),await n.mouse.pressButton(n.Button.LEFT),await n.mouse.move((0,n.left)(o)),await n.mouse.releaseButton(n.Button.LEFT),await n.mouse.pressButton(n.Button.LEFT),await n.mouse.move((0,n.up)(o)),await n.mouse.releaseButton(n.Button.LEFT),t.write(`draw_square_${o}`),console.log(`Square is drawn, side ${o}px`))}},806:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.findCommand=void 0;const n=o(617),r=o(980),s=o(190),i=o(775),a=o(18),u=o(69),c=o(497),l=o(438),d=o(408),m={mouse_down:u.moveDown,mouse_up:d.moveUp,mouse_left:c.moveLeft,mouse_right:l.moveRight,mouse_position:a.mousePosition,draw_circle:n.drawCircle,draw_square:s.DrawSquare,draw_rectangle:r.DrawRectangle,prnt_scrn:i.makeScreen};t.findCommand=e=>m[e]?m[e]:`Command ${e} did not found!`},775:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.makeScreen=void 0;const r=o(923),s=n(o(12));t.makeScreen=async(e,t)=>{try{const e=await r.mouse.getPosition(),o=200,n=e.x-100,i=e.y-100;await r.screen.highlight(new r.Region(n,i,o,o));const a=await r.screen.grabRegion(new r.Region(n,i,o,o)),u=await a.toRGB(),c=new s.default({data:Buffer.from(u.data),width:u.width,height:u.height}),l=(await c.getBufferAsync(s.default.MIME_PNG)).toString("base64");t.write(`prnt_scrn ${l}`),console.log("Screen is done")}catch{console.log("You need to choose an area that does not go beyond the boundaries of the site ")}}},18:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mousePosition=void 0;const n=o(923);t.mousePosition=async(e,t)=>{const o=await n.mouse.getPosition(),r=`mouse_position ${o.x},${o.y}`;t.write(r),console.log(r)}},69:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveDown=void 0;const n=o(923);t.moveDown=async(e,t)=>{const o=parseInt(e[0],10);await n.mouse.move((0,n.down)(o)),t.write(`mouse_down_${o}`),console.log(`Mouse is moved down on ${o}px`)}},497:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveLeft=void 0;const n=o(923);t.moveLeft=async(e,t)=>{const o=parseInt(e[0],10);await n.mouse.move((0,n.left)(o)),t.write(`mouse_left_${o}`),console.log(`Mouse is moved left on ${o}px`)}},438:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveRight=void 0;const n=o(923);t.moveRight=async(e,t)=>{const o=parseInt(e[0],10);await n.mouse.move((0,n.right)(o)),t.write(`mouse_right_${o}`),console.log(`Mouse is moved right on ${o}px`)}},408:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.moveUp=void 0;const n=o(923);t.moveUp=async(e,t)=>{const o=parseInt(e[0],10);await n.mouse.move((0,n.up)(o)),t.write(`mouse_up_${o}`),console.log(`Mouse is moved up on ${o}px`)}},993:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.httpServer=void 0;const i=s(o(147)),a=s(o(17)),u=s(o(685));t.httpServer=u.createServer((function(e,t){const o=a.resolve(a.dirname(""))+("/"===e.url?"/front/index.html":"/front"+e.url);i.readFile(o,(function(e,o){if(e)return t.writeHead(404),void t.end(JSON.stringify(e));t.writeHead(200),t.end(o)}))}))},607:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o);var r=Object.getOwnPropertyDescriptor(t,o);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[o]}}),Object.defineProperty(e,n,r)}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const i=o(993),a=o(352),u=o(806);s(o(142)).config();const c=process.env.HTTP_PORT?+process.env.HTTP_PORT:8181,l=process.env.WSS_PORT?+process.env.WSS_PORT:8080;console.log(`Start static http server on the ${c} port!`),i.httpServer.listen(c);const d=new a.WebSocketServer({port:l});d.on("connection",(function(e){console.log(`Start websocket connection on port ${l}`);const t=(0,a.createWebSocketStream)(e,{decodeStrings:!1,encoding:"utf8"});t.on("data",(async e=>{const o=e.split(" "),[n,...r]=o,s=(0,u.findCommand)(n);"string"!=typeof s?await s(r,t):console.log(s)}))})),process.on("SIGINT",(()=>{d.clients.forEach((e=>{e.close()})),d.close(),console.log(`\nDisconnect websocket connection on port ${l}`),process.exit()}))},923:e=>{e.exports=require("@nut-tree/nut-js")},142:e=>{e.exports=require("dotenv")},12:e=>{e.exports=require("jimp")},352:e=>{e.exports=require("ws")},147:e=>{e.exports=require("fs")},685:e=>{e.exports=require("http")},17:e=>{e.exports=require("path")}},t={};!function o(n){var r=t[n];if(void 0!==r)return r.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,o),s.exports}(607)})();